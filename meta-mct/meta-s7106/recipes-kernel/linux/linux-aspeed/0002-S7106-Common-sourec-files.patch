From d15467041a0034bf60ed993dbb6eb066426f9aa5 Mon Sep 17 00:00:00 2001
From: "ray.lue" <ray.lue@mic.com.tw>
Date: Mon, 1 Apr 2019 17:21:49 +0800
Subject: [PATCH] [s7106]update kernel patches

---
 arch/arm/boot/dts/aspeed-g5.dtsi | 6 ++++++
 drivers/misc/Kconfig             | 6 ++++++
 drivers/misc/Makefile            | 1 +
 3 files changed, 13 insertions(+)

diff --git a/arch/arm/boot/dts/aspeed-g5.dtsi b/arch/arm/boot/dts/aspeed-g5.dtsi
index a79e01f..c615b77 100644
--- a/arch/arm/boot/dts/aspeed-g5.dtsi
+++ b/arch/arm/boot/dts/aspeed-g5.dtsi
@@ -488,6 +488,12 @@
 				#size-cells = <1>;
 				ranges = <0 0x1e78a000 0x1000>;
 			};
+            hbled: hbled@1e6c0000 {
+                compatible = "aspeed,ast2500-hbled";
+                #address-cells = <1>;
+                #size-cells = <0>;
+                reg = <0x1e6c0000 0x1000>;
+            };
 		};
 	};
 };
diff --git a/drivers/misc/Kconfig b/drivers/misc/Kconfig
index bde3073..efdd548 100644
--- a/drivers/misc/Kconfig
+++ b/drivers/misc/Kconfig
@@ -543,6 +543,12 @@ config NPCM7XX_PCI_MBOX
 	  Expose the NPCM750/730/715/705 PCI MBOX registers found on
 	  Nuvoton SOCs to userspace.
 
+config ASPEED_G5_HBLED
+	tristate "Aspeed ast2500 Heart Beat (HBLED#) support"
+ 	depends on (ARCH_ASPEED || COMPILE_TEST) && REGMAP && MFD_SYSCON
+ 	help
+ 		Provides a driver to control the signal of HBLED#
+
 source "drivers/misc/c2port/Kconfig"
 source "drivers/misc/eeprom/Kconfig"
 source "drivers/misc/cb710/Kconfig"
diff --git a/drivers/misc/Makefile b/drivers/misc/Makefile
index 45987f5..8a2cc59 100644
--- a/drivers/misc/Makefile
+++ b/drivers/misc/Makefile
@@ -62,3 +62,4 @@ obj-y				+= cardreader/
 obj-$(CONFIG_PVPANIC)   	+= pvpanic.o
 obj-$(CONFIG_NPCM7XX_LPC_BPC)	+= npcm7xx-lpc-bpc.o
 obj-$(CONFIG_NPCM7XX_PCI_MBOX)	+= npcm7xx-pci-mbox.o
+obj-$(CONFIG_ASPEED_G5_HBLED)   += aspeed-g5-hbled.o
