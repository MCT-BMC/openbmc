From 4af1553ab4f43e8bee12b1234be87956cfb201c7 Mon Sep 17 00:00:00 2001
From: "ray.lue" <ray.lue@mic.com.tw>
Date: Wed, 10 Apr 2019 11:38:26 +0800
Subject: [PATCH] [s7106] patch ipmbbridge to assign correct ME bus number for
 s7106.

---
 ipmbbridged.cpp | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)
 mode change 100644 => 100755 ipmbbridged.cpp

diff --git a/ipmbbridged.cpp b/ipmbbridged.cpp
old mode 100644
new mode 100755
index 72c2e1d..ca049f5
--- a/ipmbbridged.cpp
+++ b/ipmbbridged.cpp
@@ -41,6 +41,15 @@ auto conn = std::make_shared<sdbusplus::asio::connection>(io);
  * @brief Channel configuration table
  * TODO : move to user configuration as JSON file
  */
+
+//s7106 ipmb channel
+#if 1 
+static const std::vector<IpmbChannelConfig> ipmbChannelsConfig = {
+	// ME channel
+	{ipmbChannelType::me, "/sys/bus/i2c/devices/1-0010/slave-mqueue",
+	"/dev/i2c-1", 0x20, 0x2C} // 8 bit addresses
+	};
+#else
 static const std::vector<IpmbChannelConfig> ipmbChannelsConfig = {
     // ME channel
     {ipmbChannelType::me, "/sys/bus/i2c/devices/5-1010/slave-mqueue",
@@ -48,7 +57,7 @@ static const std::vector<IpmbChannelConfig> ipmbChannelsConfig = {
     // IPMB header channel
     {ipmbChannelType::ipmb, "/sys/bus/i2c/devices/0-1010/slave-mqueue",
      "/dev/i2c-0", 0x20, 0x58}}; // 8 bit addresses
-
+#endif
 static std::list<IpmbChannel> ipmbChannels;
 
 /**
